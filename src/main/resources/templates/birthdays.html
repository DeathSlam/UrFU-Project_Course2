<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Дни рождения</title>
    <style th:replace="~{navigation :: head}"></style>
</head>
<body>

<div th:replace="~{navigation :: header}"></div>

<div class="content">
    <h2>Список дней рождений</h2>

    <div th:if="${error}" style="background-color: #f2dede; color: #a94442; padding: 15px; border-radius: 4px; margin-bottom: 20px;">
        <strong>Ошибка:</strong> <span th:text="${error}"></span>
    </div>

    <a th:href="@{/birthdays/new}" class="btn btn-primary" sec:authorize="!hasRole('READ_ONLY')">Добавить день рождения</a>

    <div sec:authorize="hasRole('READ_ONLY')" style="background-color: #d9edf7; color: #31708f; padding: 15px; border-radius: 4px; margin: 20px 0;">
        <strong>Режим просмотра:</strong> Вы можете просматривать все записи, но не можете их создавать или удалять. Для получения полных прав обратитесь к администратору.
    </div>

    <table>
        <thead>
        <tr>
            <th>Имя</th>
            <th>Дата</th>
            <th>Создано пользователем</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="b : ${birthdays}">
            <td th:text="${b.personName}"></td>
            <td th:text="${#temporals.format(b.birthdayDate, 'dd.MM.yyyy')}"></td>
            <td th:text="${b.createdBy}"></td>
            <td>
                <a th:href="@{/gifts/{id}(id=${b.id})}" class="btn btn-primary">Подарки</a>
                <a th:href="@{/calculation/{id}(id=${b.id})}" class="btn btn-primary">Расчёт</a>
                <a th:href="@{/birthdays/delete/{id}(id=${b.id})}"
                   class="btn btn-danger"
                   sec:authorize="!hasRole('READ_ONLY')"
                   onclick="return confirm('Вы уверены, что хотите удалить эту запись?')">Удалить</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>